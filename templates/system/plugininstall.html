<!-- ** START template/system/plugininstall.html 10.01.2018 00:03:37  ************************************************************************************ -->
<TMPL_IF FORM>
	<form method="post" data-ajax="false" name="main_form" id="main_form" action="/admin/system/plugininstall.cgi?do=install" enctype="multipart/form-data">
		<input type="hidden" name="saveformdata" value="1">
		<div style="display:flex; width:100%; text-align:left;">
			<div style="margin:auto; padding:10px; width:15%; text-align:left;">
				<TMPL_VAR PLUGININSTALL.UI_LABEL_INSTALL_NEW>
			</div>
			<div style="margin:auto; padding:10px; width:50%; text-align:left;">
				<input type="file" id="uploadfile" name="uploadfile" class="textfield" >
						<div class='' style="visibility:hidden; width:0px; height:0px;" id='uploadfile_chk_div'></div>
						<input id='uploadfile_chk' name='uploadfile_chk' type='hidden'  data-validation-error-msg="<TMPL_VAR PLUGININSTALL.ERR_NOFOLDER_OR_ZIP>" data-validation-rule=".*\S.*">
			</div>
			<div style="margin:auto; padding:10px; width:15%; text-align:right;">
				<TMPL_VAR PLUGININSTALL.UI_LABEL_SECUREPIN>
			</div>
			<div style="margin:auto; padding:10px; width:10%; text-align:left;">
				<input name="securepin" id="securepin" type="password" size="10"
				class="textfield" value="" style="background-color:#FF5632" oninput="disable()">
			</div>
			<div style="margin:auto; padding:10px; width:10%; text-align:left;">
				<button type="submit" form="main_form" name="btnsubmit" id="btnsubmit" data-role="button" data-inline="true" data-mini="true" data-icon="check"><TMPL_VAR PLUGININSTALL.UI_LABEL_INSTALLBTN></button>
			</div>
		</div>
	</form>
	<p>&nbsp;</p>


	<div style="display:flex; width:100%; text-align:left;">
		<div style="margin:auto; padding:10px;text-align:left;">
			<img width="64" height="64" src="/system/images/icons/main_plugins_title.svg">
		</div>
		<div style="margin:auto; padding:10px; width:100%; text-align:left;">
			<div class="wide"><TMPL_VAR PLUGININSTALL.UI_LABEL_INSTALLED_PLUGINS></div>
		</div>
	</div>

	<table data-role="table" data-mode="columntoggle" class="ui-responsive table-stroke" data-column-btn-text="Display Columns">
		<thead>
			<tr>
				<th data-priority="2"><TMPL_VAR PLUGININSTALL.UI_LABEL_TABLE_NO></th>
				<th data-priority="1"><TMPL_VAR PLUGININSTALL.UI_LABEL_TABLE_PLUGIN></th>
				<th data-priority="3"><TMPL_VAR PLUGININSTALL.UI_LABEL_TABLE_VERSION></th>
				<th data-priority="3"><TMPL_VAR PLUGININSTALL.UI_LABEL_TABLE_UPDATES></th>
				<th data-priority="1"><TMPL_VAR PLUGININSTALL.UI_LABEL_TABLE_OPTIONS></th>
			</tr>
		</thead>
		<tbody>

		<!-- START Plugin container -->
		<TMPL_IF PLUGINS>
			<TMPL_LOOP PLUGINS>
			<tr>
				<th><TMPL_VAR PLUGINDB_NO></th>
				<td><TMPL_VAR PLUGINDB_TITLE></td>
				<td><TMPL_VAR PLUGINDB_VERSION></td>
				<td></td>
				<td>
				<a data-role="button" data-inline="true" data-icon="info" data-mini="true" 
				href="/admin/system/tools/logfile.cgi?logfile=system/plugininstall/<TMPL_VAR PLUGINDB_NAME>.log&header=html&format=template"
				target="_blank"><TMPL_VAR PLUGININSTALL.UI_LABEL_LOGFILE></a>&nbsp;
				<a data-role="button" data-inline="true" data-icon="delete" data-mini="true" 
				href="/admin/system/plugininstall.cgi?do=uninstall&pid=<TMPL_VAR PLUGINDB_MD5_CHECKSUM>"
				target="_blank"><TMPL_VAR PLUGININSTALL.UI_LABEL_UNINSTALL></a>&nbsp;
				</td>
			</tr>
			</TMPL_LOOP>
		<TMPL_ELSE>
		</TMPL_IF>
		<!-- END Plugin container -->

		</tbody>
	</table>

	<script>
		var $messages = $('#form-error-message');
		$.validate(
		{
			modules : 'file',
			errorMessagePosition: 'inline',
		});

		// Disable some options on Load depending on selected value
		disable();

		function disable() {
		if ( $('#securepin').val().length == 0 ) {
			$('#btnsubmit').addClass('ui-disabled');
		}
		else {
			$('#btnsubmit').removeClass('ui-disabled');
		}
	}
	
	validate_enable('#uploadfile_chk');
	validate_chk_object(['#uploadfile_chk']);
	$('input[type=file]').on('change click blur', function(e)
	{
		var filename = $('input[type=file]').val().replace(/C:\\fakepath\\/i, '')
		$("#uploadfile_chk_div").html(filename);
  	$("#uploadfile_chk").val(filename);
  	$("#error-msg-uploadfile_chk").fadeOut(400);
	});
	$('input[type=file]').trigger('change');

	</script>
</TMPL_IF>
<!-- ** END template/system/plugininstall.html ************************************************************************************ -->

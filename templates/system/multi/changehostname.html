<html>
<head>
  <title><!--$template_title--></title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
  <link rel="stylesheet" href="/system/scripts/jquery/themes/main/loxberry.min.css" />
  <link rel="stylesheet" href="/system/scripts/jquery/themes/main/jquery.mobile.icons.min.css" />
  <link rel="stylesheet" href="/system/scripts/jquery/jquery.mobile.structure-1.4.5.min.css" /> 
  <link rel="stylesheet" href="/system/css/main.css" />
  <script src="/system/scripts/jquery/jquery-1.8.2.min.js"></script>
  <script src="/system/scripts/jquery/jquery.mobile-1.4.5.min.js"></script>
  <script src="/system/scripts/form-validator/jquery.form-validator.min.js"></script>
  <script src="/system/scripts/setup.js"></script>
</head>
<body>

<TMPL_IF NAME="STARTUP">
<!-- Page startup -->
<div data-role="page" id="main">
<div data-role="header" id="warning" style="background-color: red;">
	<h1>Warnung!</h>
</div>

  <!-- ************************************************************************************** -->

  <!-- content -->
  <div data-role="content" role="main" class="ui-content">
    <div class="ui-body ui-body-a ui-corner-all loxberry-logo">

    <!-- text -->
    <div style="margin: 5%">

      <p>
      <center>
      <h2>Hostname des LoxBerry ändern</h2>
	  <p>Beim Speichern wird der Hostname von Loxberry geändert. Nach der Änderung musst du LoxBerry neu starten. </p>
	  <p>Wenn du auf anderen Geräten (z.B. am Miniserver, NAS) den Namen bereits verwendet hast, musst du dort deine Konfiguration anpassen. Informiere dich zudem bei den Entwicklern deiner Plugins, ob eine Anpassung in der Konfiguration notwendig ist. Du kannst den Namen später jederzeit erneut ändern.</p>
	  </center>
      <form method="post">
	  <table>
	  <tr>
	  <td>
	  Aktueller Hostname 
	  </td>
	  <td><b><TMPL_VAR lbhostname></b>
	  </td>
	  </tr>
	  <tr>
	  <td>
	  <label for="lbnewhostname">Neuer Hostname</label>
	  </td>
	  <td>
	  <input id="lbnewhostname" autocomplete="off" name="lbnewhostname" type="text" class="textfield" value="<TMPL_VAR lbnewhostname>">
	  </td>
	  </tr>
	  <TMPL_VAR errormessage>
	  <tr>
	  <td>
	  </td>
	  <td><button type="submit" style="width: 200px;" name="btnsubmit" id="btnsubmit" data-role="button" data-inline="true" data-mini="true">
      Hostname jetzt ändern</button>
	  <button type="button" name="btncancel" class="close" data-role="button" data-inline="true" data-mini="true" onclick="return quitBox('quit');">
      Abbrechen</button>
	  <a id="btnlogs" data-role="button" href="/admin/system/tools/logfile.cgi?logfile=system/changehostname.log&header=html&format=template" target="_blank" data-inline="true" data-mini="true" data-icon="arrow-d">Logfile</a>
	
	  </td>
	  </tr>
			 
	  </table>
	  </form>
      </p>

    </div>
    <!-- /text -->

    </div>

  <!-- /content -->

  <!-- ************************************************************************************** -->
</div>



</div>
</TMPL_IF>

<TMPL_IF NAME="CHANGED">
<!-- Page "changed" -->
<div data-role="page" id="main">
<div data-role="header" id="warning">
	<h1>LoxBerry Namensänderung</h>
</div>

  <!-- ************************************************************************************** -->

  <!-- content -->
  <div data-role="content" role="main" class="ui-content">
    <div class="ui-body ui-body-a ui-corner-all loxberry-logo">

    <!-- text -->
    <div style="margin: 5%">

	<TMPL_IF successfullchanged>
	<p>Der Name wurde erfolgreich geändert. Bitte schau ins Logfile, ob es vielleicht Probleme gab.</p>
	<p>Du solltest LoxBerry jetzt neu starten. Danach ist er mit dem neuen Hostnamen <TMPL_VAR changedname> erreichbar.</p>
	
	<TMPL_ELSE>
	<p><font color="red"><b>Achtung - die Namensänderung hat offenbar nicht geklappt!</b></font></p>
	<p>Bitte schau ins Logfile, welche Probleme es gegeben haben könnte.</p>
	<p>Eventuell musst du LoxBerry neu starten, damit die Namensänderung wirksam wird.</p>
	</TMPL_IF>
	<a id="btnlogs" data-role="button" href="/admin/system/tools/logfile.cgi?logfile=system/changehostname.log&header=html&format=template" target="_blank" data-inline="true" data-mini="true" data-icon="arrow-d">Logfile</a>
	<button type="button" name="btncancel" class="close" data-role="button" data-inline="true" data-mini="true" onclick="return quitBox('quit');">
      Abbrechen</button>
	  
    </div>
    <!-- /text -->

    </div>

  <!-- /content -->

  <!-- ************************************************************************************** -->
</div>



</div>
</TMPL_IF>




<!-- /page -->

<div id="lang" style="display: none"><!--$lang--></div>
<div id='overlay' style="display: none"><img src='/system/scripts/jquery/themes/main/images/ajax-loader.gif' /></div>

</body>
<script>
$(document).ready(
function(){
            
		$(document).keypress(
			function(event){
				if (event.which == '13') {
					event.preventDefault()
					$("#btnsubmit").animate({opacity:0, height: 'toggle'},function() {
					$(this).text("Hier klicken!")}).animate({opacity:1, height: 'toggle'});
				}
			}
		);
	}
);

function quitBox(cmd) 
{      
    if (cmd=='quit')    
    {
       open(location, '_self').close();    
    }     
    return false;   
}
</script>
</html>
